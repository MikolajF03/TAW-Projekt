<div class="container mt-4">
  <div class="row">
    @for (item of (allItems | filterText:filterText | paginate:currentPage:itemsPerPage); track item._id) {
      <div class="col-12 col-lg-6 mb-4">
        <blog-item 
          [post]="item"
          [image]="item.image" 
          [title]="item.title"   
          [text]="item.text" 
          [id]="item._id"
          [likes]="item.likes"> 
        </blog-item>
      </div>
    } @empty {
      <div class="col-12 text-center py-5">
        @if (isLoading) {
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Ładowanie...</span>
          </div>
        } @else {
          <div class="alert alert-warning">
            Nie znaleziono postów pasujących do: "<strong>{{ filterText }}</strong>"
          </div>
        }
      </div>
    }
  </div>

  <div class="row mt-4" *ngIf="allItems.length > itemsPerPage">
    <div class="col-12 d-flex justify-content-center">
      <app-pagination
        [totalItems]="(allItems | filterText:filterText).length"
        [itemsPerPage]="itemsPerPage"
        [currentPage]="currentPage"
        (pageChange)="onPageChanged($event)">
      </app-pagination>
    </div>
  </div>
</div>